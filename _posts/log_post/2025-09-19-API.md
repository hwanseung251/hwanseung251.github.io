---
layout: post
title: 'APIλ΅ λ°μ΄ν„°λ¥Ό λ¶λ¬μ™€λ³΄μ'
date: 2025-09-19 22:39 +0800
logs: [WishEasy]
toc: True
---
π”Ή **APIλ” μ”μ²­(Request)** μ„ λ³΄λ‚΄κ³ , **μ‘λ‹µ(Response)** μ„ λ°›λ” κµ¬μ΅°λ‹¤.

μ„μΈκµν†µκ³µμ‚¬μ β€μµλ‹¨κ²½λ΅ μ΄λ™μ •λ³΄β€ APIλ¥Ό ν†µν•΄ μ‹¤μ  λ°μ΄ν„°λ¥Ό μ”μ²­ν•΄λ³΄λ©° κµ¬μ΅°λ¥Ό μµν”λ‹¤.

---

### 1οΈβƒ£ URL λ§λ“¤κΈ°

**1. μ—”λ“ν¬μΈνΈ (Endpoint)**

APIλ§λ‹¤ κ³ μ ν• URL κ²½λ΅λ¥Ό κ°–κ³  μμΌλ©°,

λ„λ©”μΈμ— μ΄ μ—”λ“ν¬μΈνΈλ¥Ό μ—°κ²°ν•΄ μ™„μ„±ν•λ‹¤.

```
"https://apis.data.go.kr/B553766/path/getShtrmPath"
```

**2. Parameters (μ”μ²­ νλΌλ―Έν„°)**

APIμ—μ„ μ›ν•λ” λ°μ΄ν„°λ¥Ό μ–»κΈ° μ„ν•΄ ν•„ν„°λ§ μ΅°κ±΄μ„ μ „λ‹¬ν•λ‹¤.

API λ…μ„Έμ„μ— μ •μλ ν•μ‹μ— λ§μ¶° μ‘μ„±ν•΄μ•Ό ν•λ‹¤.

```python
params = {
    "serviceKey": API_KEY,
    "dataType": "JSON",
    "dptreStnNm": "ν•©μ •",
    "arvlStnNm": "μ—¬μλ„",
    "searchDt": "2025-09-17 20:50:00",
}
```

π’΅ **TIP:**

API ν‚¤(API_KEY)λ” λ°λ“μ‹ `.env` νμΌλ΅ μ•μ „ν•κ² κ΄€λ¦¬ν•΄μ•Ό ν•λ‹¤.

κ³µκ° μ €μ¥μ†μ— λ…Έμ¶λλ©΄ μ•…μ©λ  μ„ν—μ΄ μλ‹¤.

---

### 2οΈβƒ£ GET μ”μ²­ λ³΄λ‚΄κΈ°

λ°μ΄ν„° μ΅°νλ” CRUD μ¤‘ β€R(Read)β€™μ— ν•΄λ‹Ήν•λ―€λ΅ **GET λ©”μ„λ“**λ¥Ό μ‚¬μ©ν•λ‹¤.

```python
response = requests.get(BASE_URL, params=params)
```

μ΄λ ‡κ² ν•λ©΄ λ‚΄κ°€ μ •μν• URLκ³Ό νλΌλ―Έν„°λ¥Ό ν¬ν•¨ν•΄

μ„μΈκµν†µκ³µμ‚¬ μ„λ²„λ΅ μ”μ²­μ΄ μ „μ†΅λλ‹¤.

---

### 3οΈβƒ£ μ „μ²΄ μ½”λ“

```python
import requests, os
from dotenv import load_dotenv

load_dotenv()
API_KEY = os.getenv("API_KEY")  # .envμ— μ €μ¥λ API ν‚¤ λ¶λ¬μ¤κΈ°

BASE_URL = "https://apis.data.go.kr/B553766/path/getShtrmPath"

params = {
    "serviceKey": API_KEY,
    "dataType": "JSON",
    "dptreStnNm": "ν•©μ •",
    "arvlStnNm": "μ—¬μλ„",
    "searchDt": "2025-09-17 20:50:00",
}

response = requests.get(BASE_URL, params=params)
```

---

## λ¬Έμ  μƒν™©: `SSLError (SSLV3_ALERT_ILLEGAL_PARAMETER)`

> β€μ™ κ°‘μκΈ° SSL μ¤λ¥κ°€ λ‚μ§€?β€
> 

μ”μ²­μ„ λ³΄λ‚΄μλ§μ SSL κ΄€λ ¨ μ¤λ¥κ°€ λ°μƒν–λ‹¤.

**μ°Ύμ•„λ³Έ κ²°κ³Ό κ³µκ³µλ°μ΄ν„° APIλ” HTTPSλ¥Ό μ™„λ²½ν μ§€μ›ν•μ§€ μ•λ” κ²½μ°κ°€ λ§λ‹¤λ” μ‚¬μ‹¤μ„ μ•κ² λμ—λ‹¤.**

---

### π” SSLμ΄λ€?

SSL(Secure Sockets Layer)μ€

μ›Ή λΈλΌμ°μ €λ‚ μ• ν”λ¦¬μΌ€μ΄μ…μ΄ HTTPS ν†µμ‹ μ„ ν•  λ•

λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•΄μ£Όλ” λ³΄μ• ν”„λ΅ν† μ½μ΄λ‹¤.

μ¦‰, **HTTPμ— S(Secure)** κ°€ λ¶™μΌλ©΄ SSL/TLS ν†µμ‹ μ΄ ν™μ„±ν™”λλ‹¤λ” λ»μ΄λ‹¤.

---

### μ›μΈκ³Ό ν•΄κ²°

HTTPS μ”μ²­μ΄ μ‹μ‘λλ©΄ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ κ°„ **SSL/TLS Handshake κ³Όμ •**μ΄ μ§„ν–‰λλ‹¤.

μ΄λ• μ„λ²„κ°€ λ‚΄ μ”μ²­μ μ•”νΈν™” λ°©μ‹μ„ μΈμ‹ν•μ§€ λ»ν•κ±°λ‚,

λ²„μ „ νΈν™ λ¬Έμ κ°€ μμ„ λ• μ¤λ¥κ°€ λ°μƒν•λ‹¤.

κ³µκ³µλ°μ΄ν„° APIμ κ²½μ° HTTPSκ°€ ν•„μκ°€ μ•„λ‹κΈ° λ•λ¬Έμ—,

**HTTPλ΅ μ„μ‹ μ „ν™ν•μ—¬ SSL λ‹¨κ³„λ¥Ό μ°ν**ν•λ” λ°©λ²•μΌλ΅ ν•΄κ²°ν–λ‹¤.

```python
BASE_URL = "http://apis.data.go.kr/B553766/path/getShtrmPath"
```

---

## μ‘λ‹µ κ²°κ³Ό

μ”μ²­μ΄ μ„±κ³µμ μΌλ΅ μ²λ¦¬λλ©΄ λ‹¤μκ³Ό κ°™μ€ JSON λ°μ΄ν„°κ°€ λ°ν™λλ‹¤.

```json
{
  "header": {"resultCode": "00", "resultMsg": "μ„±κ³µ"},
  "body": {
    "searchType": "duration",
    "totalDstc": 4505,
    "totalreqHr": 765,
    "totalCardCrg": 1550,
    "trsitNmtm": 1,
    "trfstnNms": [
      {"stnNm": "λ‹Ήμ‚°", "dptreLineNm": "2νΈμ„ ", "arvlLineNm": "9νΈμ„ "}
    ],
    "paths": [
      {
        "dptreStn": {"stnNm": "λ‹Ήμ‚°", "lineNm": "9νΈμ„ "},
        "arvlStn": {"stnNm": "κµ­νμμ‚¬λ‹Ή", "lineNm": "9νΈμ„ "},
        "stnSctnDstc": 1500,
        "reqHr": 92,
        "trainno": "E9704",
        "trainDptreTm": "21:10:10",
        "trainArvlTm": null,
        "etrnYn": "Y",
        "nonstopYn": "Y"
      },
      {
        "dptreStn": {"stnNm": "κµ­νμμ‚¬λ‹Ή", "lineNm": "9νΈμ„ "},
        "arvlStn": {"stnNm": "μ—¬μλ„", "lineNm": "9νΈμ„ "},
        "stnSctnDstc": 900,
        "reqHr": 93,
        "trainno": "E9704",
        "trainDptreTm": "21:11:42",
        "trainArvlTm": "21:13:15",
        "etrnYn": "Y",
        "nonstopYn": "N"
      }
    ]
  }
}

```

> APIκ°€ μ–΄λ–¤ κµ¬μ΅°λ΅ λ™μ‘ν•λ”μ§€ κ°μ΄ μ΅νκΈ° μ‹μ‘ν–λ‹¤!
> 

λ