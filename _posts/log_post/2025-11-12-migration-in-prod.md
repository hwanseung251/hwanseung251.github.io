---
layout: post
title: 'DB개편 후 배포과정 문제'
date: 2025-11-12 20:07 +0800
logs: [WishEasy]
toc: True
---

문제는 로컬에서는 서버 돌렸을 때 데이터도 잘 들어왔고 서비스 로직도 잘 작동함을 확인하고 PUSH 했다
근데 배포 서버에서는 데이터가 안올라갔는지 서비스 작동이 안됬다.

배포서버오류 이미지

그래서 깃 actions에서 어디서 문제가 발생했는지 로그 확인을 했다
근데 No migrations to apply 라고 되어있음.
분명히 새로 마이그레이션 파일을 만들었고 새로운 마이그레이트가 되어야하는데 ..?

문제를 찾아보던 중 발견한 문제

내가 새로운 마이그레이션을 만들때 기존 0001파일을 삭제함. 
근데 마이그레이션파일은 계속 히스토리를 쌓아나가야하는데 내가 삭제해버림
장고는 파일명이 같으니까 변경사항이 있는지 알리가없음 읽지않음 
그래서 cicd에서 마이그레이트가 되지 않는 문제가 생김 

원래는 ~~~해야하는데 
서버관리하는 팀원이 다른 서버로 옮기는 과정에서 서버가 재 실행되었고 덕분에 이걸 할 필요가 없어졌다!

그럼 이제 되야하는데 load_csv문제가 생김
이거는 yml자동화 workflow파일 보니까 기존의 csv를 업로드하도록 적혀있어서 그런거였고
이번에 업로드할 csv로 변경해줌

여기서 주의사항은 load_csv 할때 참조하는 테이블관계로 되어있기 때문에 업로드 순서만 잘 적어주면된다!

